
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-a9fde460.js"></script>

    <script>
      $(function() { setupCodeCopy(); });
    </script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;ruby&quot;,&quot;python&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo-9af4e165.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
              <a href="#" data-language-name="ruby">Ruby</a>
              <a href="#" data-language-name="python">Python</a>
              <a href="#" data-language-name="javascript">NodeJS</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#configurations" class="toc-h1 toc-link" data-title="Configurations">Configurations</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#user-authentication" class="toc-h1 toc-link" data-title="User Authentication">User Authentication</a>
          </li>
          <li>
            <a href="#get-product-plans" class="toc-h1 toc-link" data-title="Get Product Plans">Get Product Plans</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#http-request-headers" class="toc-h2 toc-link" data-title="HTTP Request Headers">HTTP Request Headers</a>
                  </li>
                  <li>
                    <a href="#url-parameters" class="toc-h2 toc-link" data-title="URL Parameters">URL Parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#create-a-quote-after-selecting-a-plan" class="toc-h1 toc-link" data-title="Create a quote after selecting a plan">Create a quote after selecting a plan</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#http-request" class="toc-h2 toc-link" data-title="HTTP Request">HTTP Request</a>
                  </li>
                  <li>
                    <a href="#http-request-headers" class="toc-h2 toc-link" data-title="HTTP Request Headers">HTTP Request Headers</a>
                  </li>
                  <li>
                    <a href="#http-body-parameters" class="toc-h2 toc-link" data-title="HTTP Body Parameters">HTTP Body Parameters</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#sequence-diagrams" class="toc-h1 toc-link" data-title="Sequence Diagrams">Sequence Diagrams</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-plans" class="toc-h2 toc-link" data-title="Get Plans">Get Plans</a>
                  </li>
                  <li>
                    <a href="#select-plan-and-get-a-quote" class="toc-h2 toc-link" data-title="Select plan and get a Quote">Select plan and get a Quote</a>
                  </li>
                  <li>
                    <a href="#purchase-a-quote" class="toc-h2 toc-link" data-title="Purchase a Quote">Purchase a Quote</a>
                  </li>
                  <li>
                    <a href="#activate-a-quote" class="toc-h2 toc-link" data-title="Activate a Quote">Activate a Quote</a>
                  </li>
                  <li>
                    <a href="#view-policy-details" class="toc-h2 toc-link" data-title="View Policy Details">View Policy Details</a>
                  </li>
                  <li>
                    <a href="#renew" class="toc-h2 toc-link" data-title="Renew">Renew</a>
                  </li>
                  <li>
                    <a href="#cancel" class="toc-h2 toc-link" data-title="Cancel">Cancel</a>
                  </li>
                  <li>
                    <a href="#claim" class="toc-h2 toc-link" data-title="Claim">Claim</a>
                  </li>
                  <li>
                    <a href="#repurchase" class="toc-h2 toc-link" data-title="Repurchase">Repurchase</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li><a href='https://github.com/slatedocs/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the iglooSDK Partner API! You can use our API to access igloo PSP API endpoints, which can get information on plans, policies in our database.</p>

<p>We have language bindings in Shell, Ruby, Python, and JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='configurations'>Configurations</h1>
<aside class="notice">
Make sure to replace <code>APP_KEY</code>, <code>APP_SECRET</code>, <code>APP_ID</code> with yours. You can register a new iglooSDK API key at our [developer portal](http://developers.iglooinsure.com/). Or via email: <code>nam.nguyen@iglooinsure.com</code>
</aside>

<p>The iglooSDK API uses the following keys:</p>

<table><thead>
<tr>
<th>Field</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>AppId</td>
<td>Application ID</td>
</tr>
<tr>
<td>AppKey</td>
<td>Application Key</td>
</tr>
<tr>
<td>AppSecret</td>
<td>Application Secret</td>
</tr>
</tbody></table>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s1">'Host: api.dev.iglooinsure.com'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
<span class="nt">--data-binary</span> <span class="s1">'{"app_key":&lt;APP_KEY&gt;,"app_secret":&lt;APP_SECRET&gt;,"app_id":&lt;APP_ID&gt;}'</span> <span class="se">\</span>
<span class="nt">--compressed</span> <span class="s1">'https://api.dev.iglooinsure.com/v1/app-auth/apps/api-keys'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
</code></pre></div>
<blockquote>
<p>Make sure to replace APP_KEY, APP_SECRET, APP_ID with yours. You can register a new iglooSDK API key at our <a href="http://developers.iglooinsure.com/">developer portal</a>. Or via email: nam.nguyen@iglooinsure.com</p>

<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"access_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c2c013bdc8b...08534b1e02"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>This token will be added to the request headers for future request. [x-access-token: c2c013bdc8b...08534b1e02]</p>
</blockquote>

<p>igloo expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>x-access-token: c2c013bdc8b...08534b1e02</code></p>

<aside class="notice">
You must replace <code>APP_KEY</code>, <code>APP_SECRET</code>, <code>APP_ID</code> with your personal API keys.
</aside>
<h1 id='user-authentication'>User Authentication</h1>
<blockquote>
<p>To authorize user, use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s1">'Host: api.qa.iglooinsure.com'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'x-access-token: c2c013bdc8b...08534b1e02'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'User-Agent: demo/48 CFNetwork/1220.1 Darwin/20.3.0'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Accept-Language: en-us'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'x-app-id: &lt;APP_ID&gt;'</span> <span class="se">\</span>
<span class="nt">--data-binary</span> <span class="s1">'{"user_id":"namsg_001"}'</span> <span class="se">\</span>
<span class="nt">--compressed</span> <span class="s1">'https://api.dev.iglooinsure.com/v1/psp/auth?random=1448&amp;sign=&lt;dynamic_signature&gt;&amp;timestamp=1620114166'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"jwt_token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"eyJhbGciOiJIUzUxMiIsInR5cC...ifLn5g"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<blockquote>
<p>This token will be added to the request headers for future request. [x-axinan-authorization: eyJhbGciOiJIUzUxMiIsInR5cC...ifLn5g]</p>
</blockquote>

<p>igloo expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>x-axinan-authorization: eyJhbGciOiJIUzUxMiIsInR5cC...ifLn5g</code></p>

<aside class="notice">
You must replace <code>APP_ID</code> with your personal API keys.
</aside>
<h1 id='get-product-plans'>Get Product Plans</h1>
<blockquote>
<p>Make sure to replace <code>&lt;app_token&gt;</code>, <code>&lt;user_token&gt;</code>, <code>&lt;app_id&gt;</code> with your keys.</p>
</blockquote>
<div class="highlight"><pre class="highlight shell tab-shell"><code> curl <span class="nt">-H</span> <span class="s1">'Host: api.dev.iglooinsure.com'</span> 
 <span class="nt">-H</span> <span class="s1">'x-access-token: c2c013bdc8b...08534b1e02'</span> 
 <span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> 
 <span class="nt">-H</span> <span class="s1">'x-axinan-authorization: &lt;user_token&gt;'</span> 
 <span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> 
 <span class="nt">-H</span> <span class="s1">'Accept-Language: en-us'</span> 
 <span class="nt">-H</span> <span class="s1">'x-app-id: &lt;APP_ID&gt;'</span> 
 <span class="nt">--compressed</span> <span class="s1">'https://api.dev.iglooinsure.com/v1/psp/customer/plans?brand=Apple&amp;model=iPhone13,3&amp;random=6247&amp;sign=&lt;dynamic_signature&gt;&amp;timestamp=1620114169'</span>    
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"supported"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"plan_groups"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
        </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
        </span><span class="nl">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"coverages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">}],</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MMK"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_claim_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan 1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TypePSP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium"</span><span class="p">:</span><span class="w"> </span><span class="s2">"830"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"product_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telenor-AYA-Sompo-MSP-Nil-Excess"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coverages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unrepairable"</span><span class="w">
            </span><span class="p">}],</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MMK"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">29</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_claim_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan 2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TypePSP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1330"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"monthly"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"product_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telenor-AYA-Sompo-MSP-Nil-Excess"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="w">
        </span><span class="nl">"plans"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
            </span><span class="nl">"coverages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unrepairable"</span><span class="w">
            </span><span class="p">}],</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MMK"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_claim_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"50000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan 1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TypePSP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9960"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"product_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telenor-AYA-Sompo-MSP-Nil-Excess"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coverages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unrepairable"</span><span class="w">
            </span><span class="p">}],</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MMK"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">30</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_claim_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"80000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan 2"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TypePSP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15960"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"product_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telenor-AYA-Sompo-MSP-Nil-Excess"</span><span class="w">
        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"coverages"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repairable"</span><span class="w">
            </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"min_excess"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unrepairable"</span><span class="w">
            </span><span class="p">}],</span><span class="w">
            </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MMK"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w">
            </span><span class="nl">"max_claim_amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100000"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Plan 3"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"policy_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"TypePSP"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20040"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"premium_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yearly"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"product_key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Telenor-AYA-Sompo-MSP-Nil-Excess"</span><span class="w">
        </span><span class="p">}]</span><span class="w">
    </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint retrieves all supported plans for the current device.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET /v1/psp/customer/plans</code></p>
<h3 id='http-request-headers'>HTTP Request Headers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>x-access-token</td>
<td>string</td>
<td>Client Authentication token</td>
</tr>
<tr>
<td>x-axinan-authorization</td>
<td>string</td>
<td>User Authentication token</td>
</tr>
</tbody></table>
<h3 id='url-parameters'>URL Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>brand</td>
<td>string</td>
<td>Phone&#39;s brand, like Apple, Samsung, Huawei</td>
</tr>
<tr>
<td>model</td>
<td>string</td>
<td>Phone&#39;s model, like Galaxy S20, iPhone 11 Pro</td>
</tr>
</tbody></table>

<aside class="info">
Notice — The plans are different for every device type, base on Brand and Model
</aside>
<h1 id='create-a-quote-after-selecting-a-plan'>Create a quote after selecting a plan</h1><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="nt">-H</span> <span class="s1">'Host: api.dev.iglooinsure.com'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'x-access-token: c2c013bdc8b...08534b1e02'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Content-Type: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'x-axinan-authorization: eyJhbGciOiJIUzUxMiIsInR5cC...ifLn5g'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Accept: application/json'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'Accept-Language: en-us'</span> <span class="se">\</span>
<span class="nt">-H</span> <span class="s1">'x-app-id: &lt;APP_ID&gt;'</span> <span class="se">\</span>
<span class="nt">--data-binary</span> <span class="s1">'{"plan_id":31,"insured_person":{"nrc_or_passport":"c12312","customer_name":"nam Nguyen","phone_prefix_number":"95","email":"email@domain.com","phone_number":"987651"},"insured_object":{"uuid":"&lt;igloo_device_id&gt;","model":"iPhone13,3","brand":"Apple","imei_number":""},"product_key":"Telenor-AYA-Sompo-MSP-Nil-Excess"}'</span> <span class="se">\</span>
<span class="nt">--compressed</span> <span class="s1">'https://api.dev.iglooinsure.com/v1/psp/customer/quotes?random=8815&amp;sign=&lt;dynamic_signature&gt;&amp;timestamp=1620115317'</span>
</code></pre></div><div class="highlight"><pre class="highlight ruby tab-ruby"><code>
</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
</code></pre></div><div class="highlight"><pre class="highlight javascript tab-javascript"><code>
</code></pre></div>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"policy_display_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PSP20210500003"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>This endpoint is for creating a quote on igloo server, as a preparation for Activation.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST /v1/psp/customer/quotes</code></p>
<h3 id='http-request-headers'>HTTP Request Headers</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>x-access-token</td>
<td>string</td>
<td>Client Authentication token</td>
</tr>
<tr>
<td>x-axinan-authorization</td>
<td>string</td>
<td>User Authentication token</td>
</tr>
</tbody></table>
<h3 id='http-body-parameters'>HTTP Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>plan_id</td>
<td>number</td>
<td>true</td>
<td>The selected plan&#39;s id</td>
</tr>
<tr>
<td>insured_person</td>
<td>object</td>
<td>true</td>
<td>Customer&#39;s information (*)</td>
</tr>
<tr>
<td>insured_object</td>
<td>object</td>
<td>true</td>
<td>Device&#39;s information (**)</td>
</tr>
<tr>
<td>product_key</td>
<td>string</td>
<td>true</td>
<td>The selected plan&#39;s product-key</td>
</tr>
</tbody></table>

<p>(*) insured_person is an object with structure:
<code>json
  { 
    &quot;nrc_or_passport&quot;: string,
    &quot;customer_name&quot;: string,
    &quot;phone_prefix_number&quot;: string,
    &quot;email&quot;: string,
    &quot;phone_number&quot;: string
  }
</code></p>

<p>(*) insured_object is an object with structure:
<code>json
  { 
    &quot;uuid&quot;: string,
        &quot;model&quot;: string,
        &quot;brand&quot;: string,
        &quot;imei_number&quot;: string
  }
</code></p>

<aside class="info">
Notice — `uuid` or `imei_number` is managed by iglooSDK, please retreive the id from `iglooSDK.deviceId()`
</aside>
<h1 id='errors'>Errors</h1>
<aside class="notice">
This is the general errors table for all APIs.
</aside>

<p>The iglooSDK API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>Success</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>403</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>default</td>
<td>Unknown Error</td>
</tr>
</tbody></table>
<h1 id='sequence-diagrams'>Sequence Diagrams</h1><h2 id='get-plans'>Get Plans</h2><h2 id='select-plan-and-get-a-quote'>Select plan and get a Quote</h2><h2 id='purchase-a-quote'>Purchase a Quote</h2><h2 id='activate-a-quote'>Activate a Quote</h2><h2 id='view-policy-details'>View Policy Details</h2><h2 id='renew'>Renew</h2><h2 id='cancel'>Cancel</h2><h2 id='claim'>Claim</h2>
<ol>
<li>Claim at home for Cashback</li>
<li>Claim at Repair Shop for Cashback</li>
<li>Claim at Repair Shop for Repair/Replace</li>
<li>Claim with Web Claim Portal (Phone is dead)</li>
</ol>
<h2 id='repurchase'>Repurchase</h2>
      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
                <a href="#" data-language-name="ruby">Ruby</a>
                <a href="#" data-language-name="python">Python</a>
                <a href="#" data-language-name="javascript">NodeJS</a>
          </div>
      </div>
    </div>
  </body>
</html>
